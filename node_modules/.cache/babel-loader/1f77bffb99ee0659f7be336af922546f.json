{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\n\nconst useDataApi = (initialUrl, initialData) => {\n  _s();\n\n  const [data, setData] = useState(initialData);\n  const [url, setUrl] = useState(initialUrl);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    const makeAPICall = async () => {\n      const ls = localStorage.getItem(url);\n\n      if (ls) {\n        setData(JSON.parse(ls));\n      } else {\n        setIsLoading(true);\n\n        try {\n          const res = await fetch(url);\n          const json = await res.json(); // console.log('useDataApi - useEffect - json', json);\n\n          setData([json]);\n          localStorage.setItem(url, JSON.stringify([json]));\n        } catch (err) {\n          console.log('err', err);\n        }\n      }\n\n      setIsLoading(false);\n    };\n\n    makeAPICall();\n  }, [url]);\n  return [{\n    data,\n    isLoading\n  }, setUrl];\n};\n\n_s(useDataApi, \"SXZ0JbEPOJSfCPmEULkhSGJE9dc=\");\n\nexport default useDataApi;","map":{"version":3,"sources":["/Users/lion/Sites/Visualization/project/gun-violence-us-visualization/src/hooks/useDataApi.js"],"names":["useState","useEffect","useDataApi","initialUrl","initialData","data","setData","url","setUrl","isLoading","setIsLoading","makeAPICall","ls","localStorage","getItem","JSON","parse","res","fetch","json","setItem","stringify","err","console","log"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;AAEA,MAAMC,UAAU,GAAG,CAACC,UAAD,EAAaC,WAAb,KAA6B;AAAA;;AAC9C,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAACI,WAAD,CAAhC;AACA,QAAM,CAACG,GAAD,EAAMC,MAAN,IAAgBR,QAAQ,CAACG,UAAD,CAA9B;AACA,QAAM,CAACM,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC,KAAD,CAA1C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMU,WAAW,GAAG,YAAY;AAC9B,YAAMC,EAAE,GAAGC,YAAY,CAACC,OAAb,CAAqBP,GAArB,CAAX;;AACA,UAAIK,EAAJ,EAAQ;AACNN,QAAAA,OAAO,CAACS,IAAI,CAACC,KAAL,CAAWJ,EAAX,CAAD,CAAP;AACD,OAFD,MAEO;AACHF,QAAAA,YAAY,CAAC,IAAD,CAAZ;;AACA,YAAI;AACF,gBAAMO,GAAG,GAAG,MAAMC,KAAK,CAACX,GAAD,CAAvB;AACA,gBAAMY,IAAI,GAAG,MAAMF,GAAG,CAACE,IAAJ,EAAnB,CAFE,CAGF;;AACAb,UAAAA,OAAO,CAAC,CAACa,IAAD,CAAD,CAAP;AACAN,UAAAA,YAAY,CAACO,OAAb,CAAqBb,GAArB,EAA0BQ,IAAI,CAACM,SAAL,CAAe,CAACF,IAAD,CAAf,CAA1B;AACD,SAND,CAME,OAAOG,GAAP,EAAY;AACZC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,GAAnB;AACD;AACJ;;AACDZ,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,KAjBD;;AAkBAC,IAAAA,WAAW;AACZ,GApBQ,EAoBN,CAACJ,GAAD,CApBM,CAAT;AAsBA,SAAO,CAAC;AAAEF,IAAAA,IAAF;AAAQI,IAAAA;AAAR,GAAD,EAAsBD,MAAtB,CAAP;AACD,CA5BD;;GAAMN,U;;AA8BN,eAAeA,UAAf","sourcesContent":["import { useState, useEffect } from 'react';\n\nconst useDataApi = (initialUrl, initialData) => {\n  const [data, setData] = useState(initialData);\n  const [url, setUrl] = useState(initialUrl);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const makeAPICall = async () => {\n      const ls = localStorage.getItem(url);\n      if (ls) {\n        setData(JSON.parse(ls));\n      } else {\n          setIsLoading(true);\n          try {\n            const res = await fetch(url);\n            const json = await res.json();\n            // console.log('useDataApi - useEffect - json', json);\n            setData([json]);\n            localStorage.setItem(url, JSON.stringify([json]));\n          } catch (err) {\n            console.log('err', err);\n          }\n      }\n      setIsLoading(false);\n    };\n    makeAPICall();\n  }, [url]);\n\n  return [{ data, isLoading }, setUrl];\n};\n\nexport default useDataApi;"]},"metadata":{},"sourceType":"module"}