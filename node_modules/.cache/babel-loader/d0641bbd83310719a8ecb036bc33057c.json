{"ast":null,"code":"var _jsxFileName = \"/Users/lion/Sites/Visualization/project/gun-violence-us-visualization/src/MapChart.js\",\n    _s = $RefreshSig$();\n\nimport { useD3 } from './hooks/useD3';\nimport useDataApi from './hooks/useDataApi';\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as topojson from 'topojson';\nimport * as d3 from 'd3';\nimport \"./index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = 'https://eric.clst.org/assets/wiki/uploads/Stuff/gz_2010_us_040_00_500k.json';\n\nconst MapChart = props => {\n  _s();\n\n  const [{\n    data\n  }] = useDataApi(url, []);\n  const svgRef = useRef();\n  const projRef = useRef(d3.geoMercator().center([-73.93, 40.72]).scale(57500)); // CREATES THE PROJECTION AND RENDERS CHART AND PARKS\n\n  useEffect(() => {\n    // GRAB CURRENT WIDTH/HEIGHT OF DIV ID=\"MAP\"\n    const height = svgRef.current.clientHeight;\n    const width = svgRef.current.clientWidth; // FINE TUNE THE POSITION THE MAP WITHING THE ELEMENT\n\n    projRef.current.translate([width / 2, height / 2]); // ASSING THE PROJECTION A PROJECTION\n\n    const path = d3.geoPath();\n\n    if (data.length) {\n      renderChart(data[0].features, path);\n    }\n  }, [data]);\n\n  const renderChart = (data, path) => {\n    d3.select(svgRef.current).selectAll('path').data(data).enter().append('path').attr('class', d => d.properties.name).attr('d', path); //   .style('fill', (d) => boroughLegend(d.properties.borough))\n  }; // const ref = useD3(\n  //     (map) => {\n  //         const svg = d3.select(\"body\").append(\"svg\")\n  //             .attr(\"width\", 960)\n  //             .attr(\"height\", 600);\n  //         const path = d3.geoPath();\n  //             d3.json(\"https://d3js.org/us-10m.v1.json\", function(error, us) {\n  //             if (error) throw error;\n  //             });\n  //     }\n  // );\n\n\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    id: \"boroughs-map\",\n    ref: svgRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MapChart, \"TkPm/Aa968lni4FgckNMIfcoPHo=\", false, function () {\n  return [useDataApi];\n});\n\n_c = MapChart;\nexport default MapChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"MapChart\");","map":{"version":3,"sources":["/Users/lion/Sites/Visualization/project/gun-violence-us-visualization/src/MapChart.js"],"names":["useD3","useDataApi","React","useState","useEffect","useRef","topojson","d3","url","MapChart","props","data","svgRef","projRef","geoMercator","center","scale","height","current","clientHeight","width","clientWidth","translate","path","geoPath","length","renderChart","features","select","selectAll","enter","append","attr","d","properties","name"],"mappings":";;;AAAA,SAASA,KAAT,QAAsB,eAAtB;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,OAAO,aAAP;;AAEA,MAAMC,GAAG,GAAI,6EAAb;;AAGA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAAA;;AAExB,QAAM,CAAC;AAAEC,IAAAA;AAAF,GAAD,IAAaV,UAAU,CAACO,GAAD,EAAK,EAAL,CAA7B;AACA,QAAMI,MAAM,GAAGP,MAAM,EAArB;AACA,QAAMQ,OAAO,GAAGR,MAAM,CAACE,EAAE,CAACO,WAAH,GAAiBC,MAAjB,CAAwB,CAAC,CAAC,KAAF,EAAS,KAAT,CAAxB,EAAyCC,KAAzC,CAA+C,KAA/C,CAAD,CAAtB,CAJwB,CAMxB;;AACAZ,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA,UAAMa,MAAM,GAAGL,MAAM,CAACM,OAAP,CAAeC,YAA9B;AACA,UAAMC,KAAK,GAAGR,MAAM,CAACM,OAAP,CAAeG,WAA7B,CAHY,CAIZ;;AACAR,IAAAA,OAAO,CAACK,OAAR,CAAgBI,SAAhB,CAA0B,CAACF,KAAK,GAAI,CAAV,EAAaH,MAAM,GAAI,CAAvB,CAA1B,EALY,CAOZ;;AACA,UAAMM,IAAI,GAAGhB,EAAE,CAACiB,OAAH,EAAb;;AACA,QAAIb,IAAI,CAACc,MAAT,EAAiB;AACjBC,MAAAA,WAAW,CAACf,IAAI,CAAC,CAAD,CAAJ,CAAQgB,QAAT,EAAmBJ,IAAnB,CAAX;AACC;AACJ,GAZQ,EAYN,CAACZ,IAAD,CAZM,CAAT;;AAcA,QAAMe,WAAW,GAAG,CAACf,IAAD,EAAOY,IAAP,KAAgB;AAChChB,IAAAA,EAAE,CAACqB,MAAH,CAAUhB,MAAM,CAACM,OAAjB,EAA0BW,SAA1B,CAAoC,MAApC,EAA4ClB,IAA5C,CAAiDA,IAAjD,EAAuDmB,KAAvD,GACGC,MADH,CACU,MADV,EAEGC,IAFH,CAEQ,OAFR,EAEkBC,CAAD,IAAOA,CAAC,CAACC,UAAF,CAAaC,IAFrC,EAGGH,IAHH,CAGQ,GAHR,EAGaT,IAHb,EADgC,CAKhC;AACD,GANH,CArBwB,CA6BxB;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAGA;AAEA;AACA;;;AACA,sBACI;AAAK,IAAA,EAAE,EAAC,cAAR;AAAuB,IAAA,GAAG,EAAEX;AAA5B;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH,CAjDD;;GAAMH,Q;UAEiBR,U;;;KAFjBQ,Q;AAmDN,eAAeA,QAAf","sourcesContent":["import { useD3 } from './hooks/useD3';\nimport useDataApi from './hooks/useDataApi';\nimport React, { useState, useEffect, useRef } from 'react';\nimport * as topojson from 'topojson';\nimport * as d3 from 'd3';\nimport \"./index.css\";\n\nconst url =  'https://eric.clst.org/assets/wiki/uploads/Stuff/gz_2010_us_040_00_500k.json'\n\n\nconst MapChart = (props) => {\n\n    const [{ data }] = useDataApi(url,[]);\n    const svgRef = useRef();\n    const projRef = useRef(d3.geoMercator().center([-73.93, 40.72]).scale(57500));\n    \n    // CREATES THE PROJECTION AND RENDERS CHART AND PARKS\n    useEffect(() => {\n        // GRAB CURRENT WIDTH/HEIGHT OF DIV ID=\"MAP\"\n        const height = svgRef.current.clientHeight;\n        const width = svgRef.current.clientWidth;\n        // FINE TUNE THE POSITION THE MAP WITHING THE ELEMENT\n        projRef.current.translate([width  / 2, height  / 2 ]);\n    \n        // ASSING THE PROJECTION A PROJECTION\n        const path = d3.geoPath();\n        if (data.length) {\n        renderChart(data[0].features, path);\n        }\n    }, [data]);\n\n    const renderChart = (data, path) => {\n        d3.select(svgRef.current).selectAll('path').data(data).enter()\n          .append('path')\n          .attr('class', (d) => d.properties.name)\n          .attr('d', path)\n        //   .style('fill', (d) => boroughLegend(d.properties.borough))\n      };\n\n    // const ref = useD3(\n    //     (map) => {\n    //         const svg = d3.select(\"body\").append(\"svg\")\n    //             .attr(\"width\", 960)\n    //             .attr(\"height\", 600);\n\n    //         const path = d3.geoPath();\n\n\n    //             d3.json(\"https://d3js.org/us-10m.v1.json\", function(error, us) {\n    //             if (error) throw error;\n                \n                \n    //             });\n            \n    //     }\n    // );\n    return (\n        <svg id=\"boroughs-map\" ref={svgRef}></svg>\n    );\n}\n\nexport default MapChart;\n\n"]},"metadata":{},"sourceType":"module"}