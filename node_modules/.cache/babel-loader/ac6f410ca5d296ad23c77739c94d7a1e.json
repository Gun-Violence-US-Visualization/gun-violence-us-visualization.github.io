{"ast":null,"code":"var _jsxFileName = \"/Users/lion/Sites/Visualization/project-on-github/Gun_Violence_US_Visualization/src/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Profile(props) {\n  _s();\n\n  const [statesData, setStatesData] = useState([]); //react用来注释数据\n\n  const ref = React.useRef(null); // console.log(data)\n\n  useEffect(() => {\n    (async () => {\n      // set the dimensions and margins of the graph\n      const margin = {\n        top: 10,\n        right: 30,\n        bottom: 30,\n        left: 60\n      },\n            width = 760 - margin.left - margin.right,\n            height = 400 - margin.top - margin.bottom; // append the svg object to the body of the page\n\n      const svg = d3.select(\".usProfile\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", `translate(${margin.left}, ${margin.top})`); //Read the data\n\n      d3.csv(\"./profile.csv\").then(function (data) {\n        // Add X axis\n        const x = d3.scaleLinear().domain([10, 70]).range([0, width]);\n        svg.append(\"g\").attr(\"transform\", `translate(0, ${height})`).call(d3.axisBottom(x)); // Add Y axis\n\n        const y = d3.scaleLinear().domain([0, 110]).range([height, 0]);\n        svg.append(\"g\").call(d3.axisLeft(y)); // Color scale: give me a specie name, I return a color\n\n        const color = d3.scaleOrdinal().domain([\"Unknown_Male\", \"Black_Male\", \"Asian_Male\", \"White_Male\", \"Unknown\", \"White_Female\", \"Asian_Female\", \"Black_Female\", \"Unknown_Female\"]).range([\"#67001f\", \"#b2182b\", \"#ef8a62\", \"#fddbc7\", \"#ffffff\", \"#e0e0e0\", \"#e0e0e0\", \"#4d4d4d\", \"#1a1a1a\"]); // Highlight the specie that is hovered\n\n        const highlight = function (event, d) {\n          const selected_specie = d.race_sex; // console.log(selected_specie)\n\n          d3.selectAll(\".dot\").transition().duration(200).style(\"fill\", \"lightgrey\").attr(\"r\", 3);\n          d3.selectAll(\".\" + selected_specie).transition().duration(200).style(\"fill\", color(selected_specie)).attr(\"r\", 7);\n        }; // Highlight the specie that is hovered\n\n\n        const doNotHighlight = function (event, d) {\n          d3.selectAll(\".dot\").transition().duration(200).style(\"fill\", d => color(d.race_sex)).attr(\"r\", 5);\n        }; // Add dots\n\n\n        svg.append('g').selectAll(\"dot\").data(data).enter().append(\"circle\").attr(\"class\", function (d) {\n          // console.log(`HIHI${d.race_sex}`)\n          return \"dot \" + d.race_sex;\n        }).attr(\"cx\", function (d) {\n          // console.log(d.age); \n          return x(d.age);\n        }).attr(\"cy\", function (d) {\n          // console.log(d.kill_injure); \n          return y(d.kill_injure);\n        }).attr(\"r\", 5).style(\"fill\", function (d) {\n          return color(d.race_sex);\n        }); // .on(\"mouseover\", highlight)\n        // .on(\"mouseleave\", doNotHighlight)\n      });\n    })();\n  }, [statesData.length]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    viewBox: \"0 0 960 600\",\n    className: \"usProfile\",\n    ref: ref\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this) //渲染了这个东西出来\n  ;\n}\n\n_s(Profile, \"6lPwhkhbwAf/KMa22COnjFPL+Eg=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/lion/Sites/Visualization/project-on-github/Gun_Violence_US_Visualization/src/Profile.js"],"names":["React","useState","useEffect","d3","Profile","props","statesData","setStatesData","ref","useRef","margin","top","right","bottom","left","width","height","svg","select","append","attr","csv","then","data","x","scaleLinear","domain","range","call","axisBottom","y","axisLeft","color","scaleOrdinal","highlight","event","d","selected_specie","race_sex","selectAll","transition","duration","style","doNotHighlight","enter","age","kill_injure","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport * as d3 from \"d3\"\r\n\r\nfunction Profile(props) {\r\n  const [statesData, setStatesData] = useState([]);     //react用来注释数据\r\n  const ref = React.useRef(null)\r\n  // console.log(data)\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      // set the dimensions and margins of the graph\r\n      const margin = { top: 10, right: 30, bottom: 30, left: 60 },\r\n        width = 760 - margin.left - margin.right,\r\n        height = 400 - margin.top - margin.bottom;\r\n\r\n      // append the svg object to the body of the page\r\n      const svg = d3.select(\".usProfile\")\r\n        .append(\"svg\")\r\n        .attr(\"width\", width + margin.left + margin.right)\r\n        .attr(\"height\", height + margin.top + margin.bottom)\r\n        .append(\"g\")\r\n        .attr(\"transform\",\r\n          `translate(${margin.left}, ${margin.top})`);\r\n\r\n      //Read the data\r\n      d3.csv(\"./profile.csv\",\r\n      ).then(function (data) {\r\n        // Add X axis\r\n        const x = d3.scaleLinear()\r\n          .domain([10, 70])\r\n          .range([0, width]);\r\n        svg.append(\"g\")\r\n          .attr(\"transform\", `translate(0, ${height})`)\r\n          .call(d3.axisBottom(x));\r\n\r\n        // Add Y axis\r\n        const y = d3.scaleLinear()\r\n          .domain([0, 110])\r\n          .range([height, 0]);\r\n        svg.append(\"g\")\r\n          .call(d3.axisLeft(y));\r\n\r\n        // Color scale: give me a specie name, I return a color\r\n        const color = d3.scaleOrdinal()\r\n          .domain([\"Unknown_Male\", \"Black_Male\", \"Asian_Male\", \"White_Male\", \"Unknown\", \"White_Female\", \"Asian_Female\", \"Black_Female\", \"Unknown_Female\"])\r\n          .range([\"#67001f\", \"#b2182b\", \"#ef8a62\", \"#fddbc7\", \"#ffffff\", \"#e0e0e0\", \"#e0e0e0\", \"#4d4d4d\", \"#1a1a1a\"])\r\n\r\n        // Highlight the specie that is hovered\r\n        const highlight = function (event, d) {\r\n          const selected_specie = d.race_sex\r\n          // console.log(selected_specie)\r\n          d3.selectAll(\".dot\")\r\n            .transition()\r\n            .duration(200)\r\n            .style(\"fill\", \"lightgrey\")\r\n            .attr(\"r\", 3)\r\n\r\n          d3.selectAll(\".\" + selected_specie)\r\n            .transition()\r\n            .duration(200)\r\n            .style(\"fill\", color(selected_specie))\r\n            .attr(\"r\", 7)\r\n        }\r\n\r\n        // Highlight the specie that is hovered\r\n        const doNotHighlight = function (event, d) {\r\n          d3.selectAll(\".dot\")\r\n            .transition()\r\n            .duration(200)\r\n            .style(\"fill\", d => color(d.race_sex))\r\n            .attr(\"r\", 5)\r\n        }\r\n\r\n        // Add dots\r\n        svg.append('g')\r\n          .selectAll(\"dot\")\r\n          .data(data)\r\n          .enter()\r\n          .append(\"circle\")\r\n          .attr(\"class\", function (d) { \r\n            // console.log(`HIHI${d.race_sex}`)\r\n           return \"dot \" + d.race_sex})\r\n          .attr(\"cx\", function (d) { \r\n            // console.log(d.age); \r\n            return x(d.age); })\r\n          .attr(\"cy\", function (d) { \r\n            // console.log(d.kill_injure); \r\n            return y(d.kill_injure); })\r\n          .attr(\"r\", 5)\r\n          .style(\"fill\", function (d) { return color(d.race_sex); })\r\n          // .on(\"mouseover\", highlight)\r\n          // .on(\"mouseleave\", doNotHighlight)\r\n\r\n    \r\n      })\r\n    })();\r\n  }, [statesData.length]\r\n  )\r\n\r\n  return (\r\n    <svg viewBox=\"0 0 960 600\" className=\"usProfile\" ref={ref}></svg>      //渲染了这个东西出来\r\n  )\r\n}\r\n\r\nexport default Profile"]},"metadata":{},"sourceType":"module"}